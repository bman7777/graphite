<!DOCTYPE HTML>
<html>
<head>
    <title>Graphite</title>
    <link rel="SHORTCUT ICON" href="http://www.local-binary.com/root/img/web/localbinaryicon.ico" />
    <link rel="stylesheet" type="text/css" href="Graph.css">
    
    <script src="kinetic-v5.1.0.min.js"></script>
    <script src="mathutil.js"></script>
    <script src="builder.js"></script>
    <script src="node.js"></script>
    <script src="nodeOptions.js"></script>
    <script src="shapeFactory.js"></script>
    <script src="connection.js"></script>
    <script src="connectionOptions.js"></script>
    <script src="lineFactory.js"></script>
    <script src="menu.js"></script>
    <script src="fileOptions.js"></script>
    <script src="menuConfig.js"></script>
    <script src="popup.js"></script>
    <script src="messager.js"></script>
    <script>
        var WINDOW_GUTTER = 25;
        var builder;
        var shapeSettings;
        
        function onClientLoad()
        {
            gapi.client.load('drive', 'v2', function() {});
        }
        
        function onApiLoad()
        {
            gapi.load('auth', {callback: function() {} });
            gapi.load('picker', {callback: function() {} });
            
            var clientLib = document.createElement('script');
            clientLib.setAttribute("src", "https://apis.google.com/js/client.js?onload=onClientLoad");
            document.getElementsByTagName("head")[0].appendChild(clientLib);
        }
        
        function initializeGraphite()
        {
            builder = new Graphite.Builder(
            {
                container: 'container',
                width: window.innerWidth-WINDOW_GUTTER,
                height: window.innerHeight-WINDOW_GUTTER,
                popup: new Graphite.Popup('popup', 'popupScrim'),
                messagerMount: 'messager'
            });
        }
        
        window.onresize = function(event) 
        {
            if(builder != null)
            {
                builder.updateSize(window.innerWidth-WINDOW_GUTTER, window.innerHeight-WINDOW_GUTTER);
            }
        };
        
        function buildMenu(mountId, builder)
        {
            var root = GraphiteMenu.createRootMenu(mountId, builder);
            GraphiteMenu.CONFIG(root);
        }
        
        function beginGraphite()
        {
            initializeGraphite();
            buildMenu("menu", builder);
        }
        
        WebFontConfig = 
        {
            google: { families: ['Permanent Marker'] },
            fontactive: function () { beginGraphite(); },
            fontinactive: function () { beginGraphite(); }
        };

        (function() 
        {
            var wf = document.createElement('script');
            wf.src = 'webfont-v1-google.js';
            wf.type = 'text/javascript';
            wf.async = 'true';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(wf, s);
        })();
    </script>
    <script src="https://apis.google.com/js/api.js?onload=onApiLoad"></script>
    
</head>
<body style="background-image:url('img/web/graphtile-new.gif')"
      oncontextmenu="return false;">
    
    <div id="container"></div>
    <div id="messager" class="MessagerContainer"></div>
    
    <a href="http://www.local-binary.com">
        <div class="home" style="position: fixed; top: 15px;"></div>
    </a>
    
    <div id="menu" style="position: fixed; top: 130px; left: 15px"></div>
    <div id="popupScrim"></div>
    <div id="popup"></div>
</body>
</html>
